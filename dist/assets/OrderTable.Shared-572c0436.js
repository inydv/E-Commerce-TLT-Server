import{r as i,b as l,j as s,L as j,R as T,_ as U,T as k}from"./index-3aafef44.js";import{N as L}from"./index-7352e71c.js";import{D as x}from"./Date.Pipe-a7fb7a4a.js";import{b as V,I as z}from"./index-13f30b14.js";import{R as F}from"./RSConversion.Pipe-ac2552a8.js";import{M as P,F as w}from"./index-2ede419b.js";import{A as G,M as $,F as q,V as B}from"./EditForm.Constant-3c9d17aa.js";import{U as H}from"./Order.Service-412283d4.js";import"./index-f20ea7eb.js";function sa({header:h,orders:o,isAdmin:S=!1}){const[O,t]=i.useState(!1),[f,p]=i.useState({}),[e,M]=i.useState({viewData:null,displayName:"",openForEdit:!1,id:null}),N=a=>{for(const[r,c]of Object.entries(a))M(d=>({...d,[r]:c}));t(!0)},R=async a=>{a.preventDefault();const{data:r}=await H(e.id,f);r&&r.SUCCESS&&(U.success(r==null?void 0:r.MESSAGE,k.success),t(!1),p({}))};return l("table",{className:"table-width",children:[s("thead",{children:s("tr",{children:i.Children.toArray(h==null?void 0:h.map(a=>s("th",{className:"td-border p-2",children:a})))})}),s("tbody",{children:(o==null?void 0:o.length)>0?i.Children.toArray(o==null?void 0:o.map(a=>{var r,c,d,b,D,g,E,I;return l("tr",{children:[s("td",{className:"td-border p-2",children:i.Children.toArray((r=a==null?void 0:a.orderItems)==null?void 0:r.map(({quantity:y,product:n},_)=>{var v,A,m;return l("div",{className:`grid gap-5 grid-flow-col ${_!==((v=a==null?void 0:a.orderItems)==null?void 0:v.length)-1&&"mb-4"}`,children:[s(V.LazyLoadImage,{src:((A=n==null?void 0:n.images)==null?void 0:A.length)>0&&((m=n==null?void 0:n.images[0])==null?void 0:m.url),alt:n==null?void 0:n.name,className:"h-14 w-14 aspect-square",effect:"blur",onError:({currentTarget:C})=>{C.onerror=null,C.src=z.NoImageAvailable}}),l("div",{children:[s("h1",{className:"line-clamp mb-1",children:s(j,{to:T.productDetails+"/"+(n==null?void 0:n._id),children:n==null?void 0:n.name})}),l("h1",{children:[F(n==null?void 0:n.price)," x ",y," ="," ",F((n==null?void 0:n.price)*y)]})]})]})}))}),s("td",{className:"td-border p-2",children:l("p",{className:"text-center",children:["Name: ",(c=a==null?void 0:a.shippingInformation)==null?void 0:c.name," ",s("br",{}),"Phone: ",(d=a==null?void 0:a.shippingInformation)==null?void 0:d.phone," ",s("br",{}),"Email: ",(b=a==null?void 0:a.shippingInformation)==null?void 0:b.email]})}),s("td",{className:"td-border p-2",children:s("p",{className:"text-center",children:((D=a==null?void 0:a.shippingInformation)==null?void 0:D.address)+", "+((g=a==null?void 0:a.shippingInformation)==null?void 0:g.city)+", "+((E=a==null?void 0:a.shippingInformation)==null?void 0:E.state)+", "+((I=a==null?void 0:a.shippingInformation)==null?void 0:I.pincode)})}),s("td",{className:"td-border p-2",children:s("p",{className:"text-center",children:a==null?void 0:a.orderStatus})}),s("td",{className:"td-border p-2",children:l("p",{className:"text-center",children:["Created At: ",x(a==null?void 0:a.createdAt)," ",s("br",{}),"Delivery At: ",x(a==null?void 0:a.deliveredAt)]})}),S&&s("td",{className:"td-border p-2",children:l("div",{className:"flex gap-5 justify-center items-center",children:[s(G,{size:20,className:"cursor-pointer",onClick:()=>{N({displayName:"View Order",openForEdit:!1,viewData:a})}}),s($,{size:20,className:"cursor-pointer",onClick:()=>{N({displayName:"Edit Order",openForEdit:!0,viewData:a,id:a==null?void 0:a._id})}})]})})]})})):s("tr",{children:s("td",{colSpan:"100%",className:"td-border px-5 py-10",children:s(L,{})})})}),s(P,{open:O,setOpen:t,title:e==null?void 0:e.displayName,content:e!=null&&e.openForEdit?s(w,{submitForm:R,form:q.order,formData:f,setFormData:p}):s(w,{formData:e==null?void 0:e.viewData,form:B.order,ViewForm:!0})})]})}export{sa as default};
